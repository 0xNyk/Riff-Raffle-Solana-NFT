{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createClass from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _classCallCheck from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import{METADATA_PROGRAM_ID}from'./programIds';import{deserializeUnchecked}from'borsh';import{PublicKey}from'@solana/web3.js';import{extendBorsh}from'./borsh';extendBorsh();export var METADATA_PREFIX='metadata';export var EDITION='edition';export var RESERVATION='reservation';export var MAX_NAME_LENGTH=32;export var MAX_SYMBOL_LENGTH=10;export var MAX_URI_LENGTH=200;export var MAX_CREATOR_LIMIT=5;export var MAX_CREATOR_LEN=32+1+1;export var MAX_METADATA_LEN=1+32+32+MAX_NAME_LENGTH+MAX_SYMBOL_LENGTH+MAX_URI_LENGTH+MAX_CREATOR_LIMIT*MAX_CREATOR_LEN+2+1+1+198;export var MAX_EDITION_LEN=1+32+8+200;export var EDITION_MARKER_BIT_SIZE=248;export var MetadataKey;(function(MetadataKey){MetadataKey[MetadataKey[\"Uninitialized\"]=0]=\"Uninitialized\";MetadataKey[MetadataKey[\"MetadataV1\"]=4]=\"MetadataV1\";MetadataKey[MetadataKey[\"EditionV1\"]=1]=\"EditionV1\";MetadataKey[MetadataKey[\"MasterEditionV1\"]=2]=\"MasterEditionV1\";MetadataKey[MetadataKey[\"MasterEditionV2\"]=6]=\"MasterEditionV2\";MetadataKey[MetadataKey[\"EditionMarker\"]=7]=\"EditionMarker\";})(MetadataKey||(MetadataKey={}));export var MetadataCategory;(function(MetadataCategory){MetadataCategory[\"Audio\"]=\"audio\";MetadataCategory[\"Video\"]=\"video\";MetadataCategory[\"Image\"]=\"image\";MetadataCategory[\"VR\"]=\"vr\";})(MetadataCategory||(MetadataCategory={}));export var MasterEditionV1=/// Can be used to mint tokens that give one-time permission to mint a single limited edition.\n/// If you don't know how many printing tokens you are going to need, but you do know\n/// you are going to need some amount in the future, you can use a token from this mint.\n/// Coming back to token metadata with one of these tokens allows you to mint (one time)\n/// any number of printing tokens you want. This is used for instance by Auction Manager\n/// with participation NFTs, where we dont know how many people will bid and need participation\n/// printing tokens to redeem, so we give it ONE of these tokens to use after the auction is over,\n/// because when the auction begins we just dont know how many printing tokens we will need,\n/// but at the end we will. At the end it then burns this token with token-metadata to\n/// get the printing tokens it needs to give to bidders. Each bidder then redeems a printing token\n/// to get their limited editions.\nfunction MasterEditionV1(args){_classCallCheck(this,MasterEditionV1);this.key=void 0;this.supply=void 0;this.maxSupply=void 0;this.printingMint=void 0;this.oneTimePrintingAuthorizationMint=void 0;this.key=MetadataKey.MasterEditionV1;this.supply=args.supply;this.maxSupply=args.maxSupply;this.printingMint=args.printingMint;this.oneTimePrintingAuthorizationMint=args.oneTimePrintingAuthorizationMint;};export var MasterEditionV2=function MasterEditionV2(args){_classCallCheck(this,MasterEditionV2);this.key=void 0;this.supply=void 0;this.maxSupply=void 0;this.key=MetadataKey.MasterEditionV2;this.supply=args.supply;this.maxSupply=args.maxSupply;};export var EditionMarker=/*#__PURE__*/function(){function EditionMarker(args){_classCallCheck(this,EditionMarker);this.key=void 0;this.ledger=void 0;this.key=MetadataKey.EditionMarker;this.ledger=args.ledger;}_createClass(EditionMarker,[{key:\"editionTaken\",value:function editionTaken(edition){var editionOffset=edition%EDITION_MARKER_BIT_SIZE;var indexOffset=Math.floor(editionOffset/8);if(indexOffset>30){throw Error('bad index for edition');}var positionInBitsetFromRight=7-editionOffset%8;var mask=Math.pow(2,positionInBitsetFromRight);var appliedMask=this.ledger[indexOffset]&mask;return appliedMask!==0;}}]);return EditionMarker;}();export var Edition=/// Points at MasterEdition struct\n/// Starting at 0 for master record, this is incremented for each edition minted.\nfunction Edition(args){_classCallCheck(this,Edition);this.key=void 0;this.parent=void 0;this.edition=void 0;this.key=MetadataKey.EditionV1;this.parent=args.parent;this.edition=args.edition;};export var Creator=function Creator(args){_classCallCheck(this,Creator);this.address=void 0;this.verified=void 0;this.share=void 0;this.address=args.address;this.verified=args.verified;this.share=args.share;};export var Data=function Data(args){_classCallCheck(this,Data);this.name=void 0;this.symbol=void 0;this.uri=void 0;this.sellerFeeBasisPoints=void 0;this.creators=void 0;this.name=args.name;this.symbol=args.symbol;this.uri=args.uri;this.sellerFeeBasisPoints=args.sellerFeeBasisPoints;this.creators=args.creators;};export var Metadata=/*#__PURE__*/function(){// set lazy\nfunction Metadata(args){_classCallCheck(this,Metadata);this.key=void 0;this.updateAuthority=void 0;this.mint=void 0;this.data=void 0;this.primarySaleHappened=void 0;this.isMutable=void 0;this.editionNonce=void 0;this.masterEdition=void 0;this.edition=void 0;this.key=MetadataKey.MetadataV1;this.updateAuthority=args.updateAuthority;this.mint=args.mint;this.data=args.data;this.primarySaleHappened=args.primarySaleHappened;this.isMutable=args.isMutable;this.editionNonce=args.editionNonce;}_createClass(Metadata,[{key:\"init\",value:function(){var _init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var edition;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getEdition(this.mint);case 2:edition=_context.sent;this.edition=edition;this.masterEdition=edition;case 5:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()}]);return Metadata;}();var CreateMetadataArgs=function CreateMetadataArgs(args){_classCallCheck(this,CreateMetadataArgs);this.instruction=0;this.data=void 0;this.isMutable=void 0;this.data=args.data;this.isMutable=args.isMutable;};var UpdateMetadataArgs=// Not used by this app, just required for instruction\nfunction UpdateMetadataArgs(args){_classCallCheck(this,UpdateMetadataArgs);this.instruction=1;this.data=void 0;this.updateAuthority=void 0;this.primarySaleHappened=void 0;this.data=args.data?args.data:null;this.updateAuthority=args.updateAuthority?args.updateAuthority:null;this.primarySaleHappened=args.primarySaleHappened;};var CreateMasterEditionArgs=function CreateMasterEditionArgs(args){_classCallCheck(this,CreateMasterEditionArgs);this.instruction=10;this.maxSupply=void 0;this.maxSupply=args.maxSupply;};var MintPrintingTokensArgs=function MintPrintingTokensArgs(args){_classCallCheck(this,MintPrintingTokensArgs);this.instruction=9;this.supply=void 0;this.supply=args.supply;};export var METADATA_SCHEMA=new Map([[CreateMetadataArgs,{kind:'struct',fields:[['instruction','u8'],['data',Data],['isMutable','u8']// bool\n]}],[UpdateMetadataArgs,{kind:'struct',fields:[['instruction','u8'],['data',{kind:'option',type:Data}],['updateAuthority',{kind:'option',type:'pubkeyAsString'}],['primarySaleHappened',{kind:'option',type:'u8'}]]}],[CreateMasterEditionArgs,{kind:'struct',fields:[['instruction','u8'],['maxSupply',{kind:'option',type:'u64'}]]}],[MintPrintingTokensArgs,{kind:'struct',fields:[['instruction','u8'],['supply','u64']]}],[MasterEditionV1,{kind:'struct',fields:[['key','u8'],['supply','u64'],['maxSupply',{kind:'option',type:'u64'}],['printingMint','pubkeyAsString'],['oneTimePrintingAuthorizationMint','pubkeyAsString']]}],[MasterEditionV2,{kind:'struct',fields:[['key','u8'],['supply','u64'],['maxSupply',{kind:'option',type:'u64'}]]}],[Edition,{kind:'struct',fields:[['key','u8'],['parent','pubkeyAsString'],['edition','u64']]}],[Data,{kind:'struct',fields:[['name','string'],['symbol','string'],['uri','string'],['sellerFeeBasisPoints','u16'],['creators',{kind:'option',type:[Creator]}]]}],[Creator,{kind:'struct',fields:[['address','pubkeyAsString'],['verified','u8'],['share','u8']]}],[Metadata,{kind:'struct',fields:[['key','u8'],['updateAuthority','pubkeyAsString'],['mint','pubkeyAsString'],['data',Data],['primarySaleHappened','u8'],// bool\n['isMutable','u8']// bool\n]}],[EditionMarker,{kind:'struct',fields:[['key','u8'],['ledger',[31]]]}]]);// eslint-disable-next-line no-control-regex\nvar METADATA_REPLACE=new RegExp(\"\\0\",'g');export var decodeMetadata=function decodeMetadata(buffer){var metadata=deserializeUnchecked(METADATA_SCHEMA,Metadata,buffer);metadata.data.name=metadata.data.name.replace(METADATA_REPLACE,'');metadata.data.uri=metadata.data.uri.replace(METADATA_REPLACE,'');metadata.data.symbol=metadata.data.symbol.replace(METADATA_REPLACE,'');return metadata;};export function getEdition(_x){return _getEdition.apply(this,arguments);}function _getEdition(){_getEdition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tokenMint){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return PublicKey.findProgramAddress([Buffer.from(METADATA_PREFIX),METADATA_PROGRAM_ID.toBuffer(),new PublicKey(tokenMint).toBuffer(),Buffer.from(EDITION)],METADATA_PROGRAM_ID);case 2:return _context2.abrupt(\"return\",_context2.sent[0].toBase58());case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _getEdition.apply(this,arguments);}export function getMetadata(_x2){return _getMetadata.apply(this,arguments);}function _getMetadata(){_getMetadata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(tokenMint){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return PublicKey.findProgramAddress([Buffer.from(METADATA_PREFIX),METADATA_PROGRAM_ID.toBuffer(),tokenMint.toBuffer()],METADATA_PROGRAM_ID);case 2:return _context3.abrupt(\"return\",_context3.sent[0]);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _getMetadata.apply(this,arguments);}export function getNFTMetadata(_x3){return _getNFTMetadata.apply(this,arguments);}function _getNFTMetadata(){_getNFTMetadata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(metadataAccountInfo){var metadata,result,metadataExtension;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:metadata=decodeMetadata(metadataAccountInfo.data);_context4.prev=1;_context4.next=4;return fetch(metadata.data.uri);case 4:result=_context4.sent;_context4.next=7;return result.json();case 7:metadataExtension=_context4.sent;return _context4.abrupt(\"return\",metadataExtension);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);return _context4.abrupt(\"return\");case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[1,11]]);}));return _getNFTMetadata.apply(this,arguments);}","map":null,"metadata":{},"sourceType":"module"}