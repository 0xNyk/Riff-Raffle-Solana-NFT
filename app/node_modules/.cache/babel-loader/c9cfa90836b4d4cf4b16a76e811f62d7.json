{"ast":null,"code":"import _objectSpread from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT final/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect,useState}from'react';import{Card,CardActions,CardMedia,IconButton,Tooltip}from'@material-ui/core';import{Skeleton}from'@material-ui/lab';import{ArrowForward}from'@material-ui/icons';import{useHistory}from'react-router';import{routes}from'../../router/routes';import Countdown from'../Countdown';import{getDisplayAmount}from'../../lib/accounts';import{useStyles}from'./styles';import{useViewport}from'../../hooks/useViewport';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MAX_TITLE_LENGTH=20;var RaffleCard=function RaffleCard(_ref){var raffle=_ref.raffle,className=_ref.className,otherProps=_objectWithoutProperties(_ref,[\"raffle\",\"className\"]);var _useViewport=useViewport(),device=_useViewport.device;var classes=useStyles({device:device});var _useHistory=useHistory(),push=_useHistory.push;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEnded=_useState2[0],setIsEnded=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];useEffect(function(){var timerId=setInterval(function(){return setIsEnded(new Date()<raffle.endTimestamp);},1000);return function(){return clearInterval(timerId);};},[raffle,setIsEnded]);if(raffle.prizes.length===0)return null;var prize=raffle.prizes[0];var imageUrl=raffle.metadata.overviewImageUri?raffle.metadata.overviewImageUri:prize.meta.imageUri;return/*#__PURE__*/_jsxs(Card,_objectSpread(_objectSpread({onClick:function onClick(){push(\"\".concat(routes.RAFFLES,\"/\").concat(raffle.publicKey));},className:\"\".concat(classes.root,\" \").concat(className)},otherProps),{},{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.cardPrizesBadge,children:[raffle.prizes.length,\" prize\",raffle.prizes.length>1&&'s']}),new Date()>raffle.endTimestamp&&/*#__PURE__*/_jsx(\"div\",{className:classes.cardEndedBadge,children:\"Ended\"}),!isLoaded&&/*#__PURE__*/_jsx(Skeleton,{variant:\"rect\",animation:'wave',classes:{root:classes.media}}),/*#__PURE__*/_jsx(CardMedia,{component:\"img\",className:classes.media,src:imageUrl,alt:prize.mint.name,style:isLoaded?{}:{display:'none'},onLoad:function onLoad(){return setIsLoaded(true);}}),/*#__PURE__*/_jsxs(CardActions,{className:classes.raffleInfo,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.detailsRow1,children:raffle.metadata.name.length>MAX_TITLE_LENGTH?/*#__PURE__*/_jsx(Tooltip,{title:raffle.metadata.name,placement:\"top\",children:/*#__PURE__*/_jsxs(\"div\",{children:[raffle.metadata.name.slice(0,MAX_TITLE_LENGTH-4),\" ...\"]})}):raffle.metadata.name}),/*#__PURE__*/_jsxs(\"div\",{className:classes.detailsRow2,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.ticketsSold,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.label,children:/*#__PURE__*/_jsx(\"span\",{className:classes.cardLabel,children:\"Tickets sold\"})}),raffle.totalTickets]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.endingIn,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.label,children:/*#__PURE__*/_jsx(\"span\",{className:classes.cardLabel,children:\"Ending in\"})}),isEnded?/*#__PURE__*/_jsx(Countdown,{endTimestamp:raffle.endTimestamp}):'-']})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.detailsRow3,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.ticketPrice,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.label,children:/*#__PURE__*/_jsx(\"span\",{className:classes.cardLabel,children:\"Ticket price\"})}),getDisplayAmount(raffle.proceeds.ticketPrice,raffle.proceeds.mint),' ',raffle.proceeds.mint.symbol]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(IconButton,{className:classes.goToRaffle,children:/*#__PURE__*/_jsx(ArrowForward,{})})})]})]})]}));};export default RaffleCard;","map":null,"metadata":{},"sourceType":"module"}