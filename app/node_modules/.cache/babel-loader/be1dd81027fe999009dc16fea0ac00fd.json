{"ast":null,"code":"import _objectSpread from\"C:/Riff-Raffle-Solana-NFT build 1-1/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useMemo,useRef}from'react';import{WalletMultiButton}from'@solana/wallet-adapter-material-ui';import{ArrowBack,DoubleArrow}from'@material-ui/icons';import{Button,IconButton,Typography}from'@material-ui/core';import{useHistory}from'react-router';import{useProgramApis}from'../../hooks/useProgramApis';import Countdown from'../../components/Countdown';import PrizeShowcaseOngoing from'./components/PrizeShowcaseOngoing';import RaffleInfoSection from'../../components/RaffleInfoSection';import{PurchaseTickets}from'./components/PurchaseTicketsSection/PurchaseTicket';import{routes}from'../../router/routes';import Screen from'../../components/layout/Screen';import useCommonStyles from'../../assets/styles';import{useStyles}from'./styles';import PrizeGalleryOngoing from'./components/PrizeGalleryOngoing';import{useViewport}from'../../hooks/useViewport';import{DeviceType}from'../../providers/ViewportProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RaffleOngoingScreen=function RaffleOngoingScreen(_ref){var _draffleClient$provid2;var raffle=_ref.raffle,updateRaffle=_ref.updateRaffle;var _useViewport=useViewport(),device=_useViewport.device;var classes=_objectSpread(_objectSpread({},useCommonStyles()),useStyles({device:device}));var _useHistory=useHistory(),push=_useHistory.push;var _useProgramApis=useProgramApis(),draffleClient=_useProgramApis.draffleClient;var prizeGalleryRef=useRef(null);var entrant=useMemo(function(){var _draffleClient$provid;if(!((_draffleClient$provid=draffleClient.provider.wallet)===null||_draffleClient$provid===void 0?void 0:_draffleClient$provid.publicKey))return;return raffle===null||raffle===void 0?void 0:raffle.entrants.get(draffleClient.provider.wallet.publicKey.toString());},[raffle,(_draffleClient$provid2=draffleClient.provider.wallet)===null||_draffleClient$provid2===void 0?void 0:_draffleClient$provid2.publicKey]);// \"Unnecessary\" dependency required due to React not picking up change in publicKey subfield\nif(!raffle)return null;return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:device===DeviceType.Phone?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:\"> \".concat(raffle.metadata.name)}),/*#__PURE__*/_jsx(\"div\",{className:classes.countdown,children:/*#__PURE__*/_jsx(Countdown,{endTimestamp:raffle.endTimestamp,spacing:'5%'})}),/*#__PURE__*/_jsx(RaffleInfoSection,{raffle:raffle,userConnected:!!draffleClient.provider.wallet.publicKey,userTickets:entrant===null||entrant===void 0?void 0:entrant.tickets}),/*#__PURE__*/_jsx(\"div\",{className:classes.spacer}),/*#__PURE__*/_jsx(Typography,{variant:\"overline\",children:\"Prizes\"}),/*#__PURE__*/_jsx(PrizeGalleryOngoing,{raffle:raffle,scrollRef:prizeGalleryRef}),/*#__PURE__*/_jsx(\"div\",{className:classes.spacer}),draffleClient.provider.wallet.publicKey?/*#__PURE__*/_jsx(PurchaseTickets,{raffle:raffle,updateRaffle:updateRaffle}):/*#__PURE__*/_jsx(ConnectActionSection,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.spacer})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.topSection,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.raffleTitle,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.leftTitleSection,children:/*#__PURE__*/_jsx(IconButton,{size:\"medium\",className:classes.backButton,onClick:function onClick(){return push(routes.RAFFLES);},children:/*#__PURE__*/_jsx(ArrowBack,{})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.middleTitleSection,children:/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:\"> \".concat(raffle.metadata.name)})}),/*#__PURE__*/_jsx(\"div\",{className:classes.rightTitleSection})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.countdown,children:/*#__PURE__*/_jsx(Countdown,{endTimestamp:raffle.endTimestamp,spacing:'5%'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.mainContent,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.prizesSection,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",className:classes.prizesHeader,children:[\"Prizes\",raffle.prizes.length>3&&/*#__PURE__*/_jsxs(_Fragment,{children:[' -',/*#__PURE__*/_jsx(Button,{className:classes.labelPrizeAmount,variant:\"text\",disableRipple:true,onClick:function onClick(){var _prizeGalleryRef$curr;return(_prizeGalleryRef$curr=prizeGalleryRef.current)===null||_prizeGalleryRef$curr===void 0?void 0:_prizeGalleryRef$curr.scrollIntoView({behavior:'smooth',block:'start'});},children:/*#__PURE__*/_jsxs(\"span\",{children:[\"See all \",raffle.prizes.length]})})]})]}),/*#__PURE__*/_jsx(PrizeShowcaseOngoing,{prizes:raffle.prizes})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.detailsSection,children:[/*#__PURE__*/_jsx(RaffleInfoSection,{raffle:raffle,userConnected:!!draffleClient.provider.wallet.publicKey,userTickets:entrant===null||entrant===void 0?void 0:entrant.tickets}),/*#__PURE__*/_jsx(\"div\",{className:classes.actionSectionContainer,children:draffleClient.provider.wallet.publicKey?/*#__PURE__*/_jsx(PurchaseTickets,{raffle:raffle,updateRaffle:updateRaffle}):/*#__PURE__*/_jsx(ConnectActionSection,{})})]})]}),raffle.prizes.length>3&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DoubleArrow,{className:classes.scrollIcon}),/*#__PURE__*/_jsx(PrizeGalleryOngoing,{raffle:raffle,scrollRef:prizeGalleryRef})]})]})});};var ConnectActionSection=function ConnectActionSection(){var _useViewport2=useViewport(),device=_useViewport2.device;var classes=_objectSpread(_objectSpread({},useCommonStyles()),useStyles({device:device}));return/*#__PURE__*/_jsx(\"div\",{className:classes.actionSection,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.actionSectionInner,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.actionTagline,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",className:classes.textHighlight,children:\"Tickets are still available.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Don't miss out!\"})]}),/*#__PURE__*/_jsx(WalletMultiButton,{variant:\"outlined\",color:\"secondary\",className:\"\".concat(classes.mainButton,\" \").concat(classes.connectToBuyButton),children:\"Connect to buy\"})]})});};var RaffleOngoingScreenWithLayout=function RaffleOngoingScreenWithLayout(props){var _useHistory2=useHistory(),push=_useHistory2.push;console.log(\"raffle ongoing screen\");return/*#__PURE__*/_jsx(Screen,{onBackNavigation:function onBackNavigation(){return push(routes.RAFFLES);},children:/*#__PURE__*/_jsx(RaffleOngoingScreen,_objectSpread({},props))});};export default RaffleOngoingScreenWithLayout;","map":null,"metadata":{},"sourceType":"module"}