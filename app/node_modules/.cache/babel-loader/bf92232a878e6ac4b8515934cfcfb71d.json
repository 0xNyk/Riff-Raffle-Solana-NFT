{"ast":null,"code":"import _toConsumableArray from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/kroni/Desktop/RIFF RAFFLE SITE PNSC/Riff-Raffle-Solana-NFT/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useMemo,useState}from'react';import{Grid,Typography}from'@material-ui/core';import CircularProgress from'@material-ui/core/CircularProgress';import{useWallet}from'@solana/wallet-adapter-react';import RaffleCard from'../../components/RaffleCard';import{useStyles}from'./styles';import{useRafflesStore}from'../../hooks/useRafflesStore';import Screen from'../../components/layout/Screen';import{useViewport}from'../../hooks/useViewport';import FilterBar from'./components/FilterBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ExploreRafflesScreen=function ExploreRafflesScreen(){console.log(process.env.NODE_ENV);console.log(process.env.REACT_APP_TESTING);var _useViewport=useViewport(),device=_useViewport.device;var classes=useStyles({device:device});var _useWallet=useWallet(),publicKey=_useWallet.publicKey;var _useRafflesStore=useRafflesStore(),raffles=_useRafflesStore.raffles,fetchAllRaffles=_useRafflesStore.fetchAllRaffles,fetching=_useRafflesStore.fetching;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOwnRafflesOnly=_useState2[0],setShowOwnRafflesOnly=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hideEndedRaffles=_useState4[0],setHideEndedRaffles=_useState4[1];useEffect(fetchAllRaffles,[fetchAllRaffles]);var filterMap=useMemo(function(){return{own:function own(raffle){return raffle.entrants.has((publicKey===null||publicKey===void 0?void 0:publicKey.toString())||'');},ongoing:function ongoing(raffle){return new Date()<raffle.endTimestamp;}};},[publicKey]);var rafflesToShow=useMemo(function(){var toShow=_toConsumableArray(raffles.values()).sort(function(raffle1,raffle2){return raffle2.endTimestamp.getTime()-raffle1.endTimestamp.getTime();});if(showOwnRafflesOnly)toShow=toShow.filter(filterMap.own);if(hideEndedRaffles)toShow=toShow.filter(filterMap.ongoing);return toShow;},[raffles,filterMap,showOwnRafflesOnly,hideEndedRaffles]);if(raffles.size===0&&fetching)return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.mainContent,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"secondary\"})})});if(raffles.size===0)return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Typography,{variant:\"h1\",className:classes.titleBar,children:\"More raffles will be coming soon!\"})});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:'',alt:''}),/*#__PURE__*/_jsx(FilterBar,{hideEndedRaffles:hideEndedRaffles,setHideEndedRaffles:setHideEndedRaffles,setShowOwnRafflesOnly:setShowOwnRafflesOnly}),rafflesToShow.length>0?/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:'center',direction:'row',className:classes.rafflesGrid,children:rafflesToShow.filter(function(r){return r.prizes.length>0;}).map(function(raffle){return/*#__PURE__*/_jsx(RaffleCard,{className:classes.raffleCardContainer,raffle:raffle},raffle.publicKey.toString());})}):/*#__PURE__*/_jsx(Typography,{variant:\"h4\",className:classes.mainContent,children:\"No raffles to display.\"})]});};var ExploreRafflesScreenWithLayout=function ExploreRafflesScreenWithLayout(){return/*#__PURE__*/_jsx(Screen,{children:/*#__PURE__*/_jsx(ExploreRafflesScreen,{})});};export default ExploreRafflesScreenWithLayout;","map":null,"metadata":{},"sourceType":"module"}